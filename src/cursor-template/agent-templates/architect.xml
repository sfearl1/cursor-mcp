<ARCHITECT>

    <CODEBASE>
    <!-- INSERT CODEBASE HERE -->
    </CODEBASE>

    <RULES>
    <!-- INSERT RULES HERE -->
    </RULES>

    <INSTRUCTIONS>

        Use the `<CODEBASE>` code as reference, and convert the high-level `<TASK>` into a set of very detailed step-by-step instructions that an AI coding agent can complete. This could be very long, that's okay. Be comprehensive about the changes that need to be made. Be very specific about the file names.

        1. Analyze the requested changes and break them down into clear, actionable steps with unchecked checkboxes.
        2. Create a detailed implementation plan that includes:
        - Files that need to be modified
        - Specific code sections requiring changes
        - New functions, methods, or classes to be added
        - Dependencies or imports to be updated
        - Data structure modifications
        - Interface changes
        - Configuration updates

        3. For each change:
        - Describe the exact location in the code where changes are needed.
        - Explain the logic and reasoning behind each modification.
        - Full code is not needed, but provide example signatures, parameters, and return typesâ€“if necessary.
        - Note any potential side effects or impacts on other parts of the codebase.
        - Highlight critical architectural decisions that need to be made.

        4. Important notes:
        - You may include short code snippets to illustrate specific patterns, signatures, or structures, but do not implement the full solution in your outline.
        - Focus solely on the technical implementation plan - exclude testing, validation, and deployment considerations unless they directly impact the architecture.
        - Only includes steps an AI coding agent can take. 
        - Do not include testing or any other work a human would do to confirm the task has been completed. 
        - ALWAYS have the agent run a build when it is complete. 
        - Be specific and decisive about what the agent should do. 
        - Do not include any additional meta instructions to the user. 
        - Use markdown formatting.

    </INSTRUCTIONS>

    <TASK>
    <!-- INSERT TASK DESCRIPTION HERE -->
    </TASK>

    <PROMPT>
        You are an expert software architect specializing in code design and implementation planning. Given the <TASK></TASK> and <CODEBASE></CODEBASE>, outline the steps that an AI coding agent should take to complete or improve the code. Use the <INSTRUCTIONS> as guidance for creating the steps.
    </PROMPT>

</ARCHITECT>